(function(n){"use strict";n.module("app.controllers",["tubular.services","tubular.models"]).run(function(n){n.$on("titleEmit",function(t,i){n.$broadcast("titleBroadcast",i)})}).controller("genericCtrl",function(n,t,i,r){n.$on("tbGrid_OnConnectionError",function(n,i){t.defaultErrorHandler(i,!0)});n.$on("tbForm_OnConnectionError",function(n,i){t.defaultErrorHandler(i,!0)});n.$on("tbForm_OnSuccessfulSave",function(n,t){r.success(t||"Updated")})});n.module("app",["ngRoute","tubular","ui.bootstrap","app.controllers","toastr"]).config(["$routeProvider","$locationProvider",function(n,t){n.when("/",{templateUrl:"/views/home.html",title:"Home"}).when("/Login",{templateUrl:"/views/login.html",title:"Login"});n.otherwise({redirectTo:"/"});t.html5Mode(!0)}]).config(["$httpProvider",function(n){n.interceptors.push("noCacheInterceptor")}]).factory("noCacheInterceptor",function(){return{request:function(n){if(n.method=="GET"&&n.url.indexOf(".htm")===-1&&n.url.indexOf("blob:")===-1){var t=n.url.indexOf("?")===-1?"?":"&";n.url=n.url+t+"noCache="+(new Date).getTime()}return n}}}).service("alerts",["$filter","toastr",function(n,t){var i=this;i.previousError="";i.defaultErrorHandler=function(r){console.info(":( ",r);var u=n("errormessage")(r);i.previousError=u;u!="Unauthorized"&&t.error(u)}}])})(window.angular),function(){"use strict";angular.module("app.controllers").controller("loginCtrl",function(n,t,i,r,u,f,e){n.loading=!1;n.tokenReset=f.token;n.submitForm=function(){if(!n.username||!n.password||n.username.trim()==""||n.password.trim()==""){e.error("","You need to fill in a username and password");return}n.loading=!0;i.authenticate(n.username,n.password,n.redirectHome,function(t){n.loading=!1;e.error(t)},!0)};n.redirectHome=function(){document.location=document.location};i.isAuthenticated()&&t.path("/")}).controller("navCtrl",function(n,t,i,r,u){n.user="username";n.menus=[];n.isRunning=!1;n.isAnonymousView=!0;n.$on("$routeChangeSuccess",function(){n.key=t.current.title;n.content=n.key+" - Tubular";n.isAnonymousView=t.current.title=="Login";n.isAnonymousView==!1&&r.isAuthenticated()==!1?i.path("/Login"):r.isAuthenticated()&&(n.user=r.userData.username,n.roles=r.userData.role,n.menus=angular.fromJson(u.get("menus")),n.subheader=null,n.pageTitle=n.key,n.content=n.pageTitle+" -Tubular",n.$emit("titleEmit",n.pageTitle))});n.logout=function(){r.removeAuthentication();n.user="";i.path("/Login")}}).controller("titleCtrl",function(n,t){n.$on("$routeChangeSuccess",function(){n.key=t.current.title;n.content=n.key+" - Tubular"})})}();